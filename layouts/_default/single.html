{{ define "main" }}
  {{ partial "bookshop_bindings" `(dict "topper" .Params.topper "title" .Params.title)` }}
  {{ partial "bookshop_partial" (slice "topper" (dict "topper" .Params.topper "title" .Params.title)) }}

  {{ if .Params.detail_blocks }}
    {{ partial "bookshop_bindings" `.Params.detail_blocks` }}
    {{ partial "bookshop_partial" (slice "page" .Params.detail_blocks) }}
  {{ else }}
    {{ partial "bookshop_bindings" `.Params.content_blocks` }}
    {{ partial "bookshop_partial" (slice "page" .Params.content_blocks) }}
  {{ end }}
{{ end }}